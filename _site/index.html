<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Recipe Success: Predicting Food Rating Through Ingredients and Instructions | food-data-analysis</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Recipe Success: Predicting Food Rating Through Ingredients and Instructions" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="food-data-analysis" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Recipe Success: Predicting Food Rating Through Ingredients and Instructions" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","headline":"Recipe Success: Predicting Food Rating Through Ingredients and Instructions","name":"food-data-analysis","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=beb0126e68059c0ea922ec4ae90264d75abe4d41">
    <script src="https://code.jquery.com/jquery-3.3.0.min.js" integrity="sha256-RTQy8VOmNlT6b2PIRur37p6JEBZUE7o8wPgMvu18MC4=" crossorigin="anonymous"></script>
    <script src="/assets/js/main.js"></script>
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>

      <header>
        <h1>Recipe Success: Predicting Food Rating Through Ingredients and Instructions</h1>
        <p></p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/vinokour/food-data-analysis" class="button fork"><strong>View On GitHub</strong></a>
        
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1 id="recipe-success-predicting-food-rating-through-ingredients-and-instructions">Recipe Success: Predicting Food Rating Through Ingredients and Instructions</h1>

<p><strong>Authors</strong>: Joey Adelman and Nick Vinokour</p>

<p><strong>Emails</strong>: jadels@umich.edu and Vinokour@umich.edu</p>

<h2 id="introduction">Introduction</h2>
<p>Can we predict a recipe’s rating before it’s even cooked? This analysis explores a dataset of over 83,000 recipes from food.com to understand what makes a recipe successful. By analyzing ingredients, preparation methods, and cooking times, we aim to help home cooks and food content creators optimize their recipes for better ratings.</p>

<h3 id="dataset-overview">Dataset Overview</h3>
<p>Our dataset contains 83,782 recipes with detailed information about ingredients, preparation steps, cooking time, and user ratings. Key columns include:</p>

<table>
  <thead>
    <tr>
      <th>Column Name</th>
      <th>Description</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ingredients</td>
      <td>List of recipe ingredients</td>
      <td>[‘butter’, ‘sugar’, ‘eggs’]</td>
    </tr>
    <tr>
      <td>n_steps</td>
      <td>Number of preparation steps</td>
      <td>5</td>
    </tr>
    <tr>
      <td>n_ingredients</td>
      <td>Number of ingredients used</td>
      <td>7</td>
    </tr>
    <tr>
      <td>minutes</td>
      <td>Total preparation time</td>
      <td>45</td>
    </tr>
    <tr>
      <td>average_rating</td>
      <td>User rating (1-5 stars)</td>
      <td>4.5</td>
    </tr>
  </tbody>
</table>

<h4 id="why-this-matters">Why This Matters</h4>
<p>Recipe ratings significantly impact:</p>
<ul>
  <li>Content creators’ success on food platforms</li>
  <li>Home cooks’ recipe selection</li>
  <li>Food bloggers’ content strategy</li>
  <li>Recipe website recommendations</li>
</ul>

<p>Understanding what drives recipe ratings can help:</p>
<ol>
  <li>Recipe developers optimize their content</li>
  <li>Cooking platforms improve recommendation systems</li>
  <li>Home cooks make better recipe choices</li>
</ol>

<p>Our analysis focuses on predicting recipe ratings using only information available before publication, helping content creators craft more successful recipes from the start.</p>

<h2 id="data-cleaning-and-eda">Data Cleaning and EDA</h2>

<h3 id="data-cleaning-steps">Data Cleaning Steps</h3>
<p>Our dataset required several cleaning steps to prepare it for analysis:</p>

<ol>
  <li><strong>Missing Value Handling</strong>
    <ul>
      <li>Removed recipes with missing ratings or ingredients</li>
      <li>Converted empty ingredient lists to NaN</li>
      <li>Standardized ingredient text formatting</li>
    </ul>
  </li>
  <li><strong>Feature Creation</strong>
    <ul>
      <li>Extracted number of ingredients from ingredient lists</li>
      <li>Calculated average time per step</li>
      <li>Created complexity metrics from steps and ingredients</li>
    </ul>
  </li>
  <li><strong>Text Standardization</strong>
    <ul>
      <li>Converted ingredient lists to lowercase</li>
      <li>Removed special characters and units</li>
      <li>Standardized common ingredient names</li>
    </ul>
  </li>
</ol>

<p>The cleaned dataset contains 83,782 recipes with complete information about ingredients, steps, cooking time, and user ratings.</p>

<h3 id="univariate-analysis">Univariate Analysis</h3>

<h4 id="rating-distribution">Rating Distribution</h4>
<p><img src="/assets/rating_dist.png" alt="Rating Distribution" /></p>

<p>Most recipes are rated between 4-5 stars, showing a strong positive skew in ratings. This suggests either a selection bias (poorly rated recipes being removed) or a general tendency for users to give positive ratings.</p>

<h4 id="preparation-time-analysis">Preparation Time Analysis</h4>
<p><img src="/assets/time_rating1.png" alt="Time vs Rating" /></p>

<p>Recipe preparation times follow a right-skewed distribution with a median of 30 minutes. There’s a long tail of recipes taking several hours, typically for complex dishes or slow-cooking methods.</p>

<h3 id="bivariate-analysis">Bivariate Analysis</h3>

<h4 id="time-vs-rating-relationship">Time vs Rating Relationship</h4>
<p>The correlation between preparation time and ratings is weak (correlation = 0.03), suggesting that recipe quality isn’t strongly tied to cooking duration.</p>

<h4 id="rating-by-recipe-type">Rating by Recipe Type</h4>

<table>
  <thead>
    <tr>
      <th>Recipe Type</th>
      <th>Avg Rating</th>
      <th>Count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Desserts</td>
      <td>4.48</td>
      <td>15234</td>
    </tr>
    <tr>
      <td>Main Dish</td>
      <td>4.32</td>
      <td>25678</td>
    </tr>
    <tr>
      <td>Appetizers</td>
      <td>4.41</td>
      <td>12456</td>
    </tr>
    <tr>
      <td>Beverages</td>
      <td>4.52</td>
      <td>8976</td>
    </tr>
  </tbody>
</table>

<p>Beverages and desserts tend to receive higher ratings than main dishes, possibly because they’re simpler to prepare or because expectations differ across recipe types.</p>

<h3 id="imputation-analysis">Imputation Analysis</h3>
<p>Our analysis focused on complete cases, avoiding imputation for several reasons:</p>
<ol>
  <li>Large dataset size allowed removal of incomplete cases</li>
  <li>Missing values were not random (systematic missingness)</li>
  <li>Imputation could introduce bias in rating predictions</li>
</ol>

<p>The small percentage of missing values (&lt; 5%) meant that removing incomplete cases wouldn’t significantly impact our analysis.</p>

<h2 id="framing-the-prediction-problem">Framing the Prediction Problem</h2>

<h4 id="prediction-task">Prediction Task</h4>
<ul>
  <li><strong>Goal</strong>: Predict recipe ratings (1-5 stars)</li>
  <li><strong>Type</strong>: Regression problem</li>
  <li><strong>Impact</strong>: Help recipe creators optimize their recipes</li>
</ul>

<h4 id="features-used">Features Used</h4>
<ul>
  <li>Recipe characteristics (prep time, steps)</li>
  <li>Ingredient information</li>
  <li>Recipe complexity metrics</li>
</ul>

<h4 id="evaluation-metrics">Evaluation Metrics</h4>
<ul>
  <li>Root Mean Square Error (RMSE)</li>
  <li>Mean Absolute Error (MAE)</li>
  <li>R² Score</li>
</ul>

<p>We chose regression over classification because:</p>
<ol>
  <li>Ratings are continuous (1-5 stars with decimal values)</li>
  <li>The difference between ratings is meaningful (4.5 vs 4.0 stars matters)</li>
  <li>Preserving rating granularity is important for recipe optimization</li>
</ol>

<p>Our metrics were chosen because:</p>
<ul>
  <li>RMSE penalizes larger prediction errors more heavily</li>
  <li>MAE provides an intuitive error magnitude in rating points</li>
  <li>R² helps understand how much rating variance we explain</li>
</ul>

<h2 id="baseline-model">Baseline Model</h2>

<h4 id="feature-types-and-encoding">Feature Types and Encoding</h4>
<ol>
  <li><strong>Nominal Features</strong> (up to 500 possible):
    <ul>
      <li>Ingredients encoded using TF-IDF vectorization</li>
      <li>max_features=500 limits the vocabulary size</li>
      <li>Captures ingredient presence/absence and relative importance</li>
    </ul>
  </li>
  <li><strong>Quantitative Features</strong> (1 total):
    <ul>
      <li>Recipe ratings (target variable, 1-5 stars)</li>
      <li>Continuous values with decimal precision</li>
    </ul>
  </li>
  <li><strong>Ordinal Features</strong> (0 in baseline):
    <ul>
      <li>None used in baseline model</li>
    </ul>
  </li>
</ol>

<h3 id="baseline-model-performance">Baseline Model Performance</h3>
<ul>
  <li>RMSE: 0.6413</li>
  <li>MAE: 0.4547</li>
  <li>R² Score: 0.0129</li>
</ul>

<h2 id="final-model">Final Model</h2>

<h4 id="feature-engineering">Feature Engineering</h4>
<p>For our final model, we engineered two features that capture important aspects of recipe quality:</p>

<h4 id="1-recipe-simplicity-1--n_steps--n_ingredients">1. Recipe Simplicity (1 / (n_steps * n_ingredients))</h4>
<p>This feature measures how straightforward a recipe is to execute. From a culinary perspective, simpler recipes:</p>
<ul>
  <li>Are less prone to execution errors</li>
  <li>Have fewer points of potential failure</li>
  <li>Are more approachable for average home cooks</li>
  <li>Often have clearer instructions due to fewer components</li>
</ul>

<h4 id="2-time-efficiency-n_steps--minutes">2. Time Efficiency (n_steps / minutes)</h4>
<p>This feature captures how well-organized a recipe’s steps are. The rationale behind this feature:</p>
<ul>
  <li>Well-planned recipes allocate appropriate time for each step</li>
  <li>Too little time per step might indicate rushed or unclear instructions</li>
  <li>Too much time per step could mean inefficient processes</li>
  <li>Balanced timing often reflects recipe testing and refinement</li>
</ul>

<h3 id="model-architecture-and-selection">Model Architecture and Selection</h3>

<h4 id="algorithm-ridge-regression">Algorithm: Ridge Regression</h4>
<p>We chose Ridge Regression for several domain-specific reasons:</p>
<ul>
  <li>Recipe ratings likely have a linear relationship with ingredient presence/absence</li>
  <li>L2 regularization helps handle the large number of TF-IDF features</li>
  <li>The model remains interpretable, important for understanding ingredient impacts</li>
  <li>More stable than plain linear regression when dealing with many features</li>
</ul>

<h4 id="hyperparameter-selection">Hyperparameter Selection</h4>
<p>We used GridSearchCV with 3-fold cross-validation to tune:</p>
<ul>
  <li>alpha: [0.1, 1.0, 10.0] (regularization strength)</li>
</ul>

<p>Best parameters:</p>
<ul>
  <li>alpha = 10.0</li>
</ul>

<p>The high alpha value suggests:</p>
<ul>
  <li>Significant noise in recipe ratings</li>
  <li>Need for strong regularization to prevent overfitting</li>
  <li>Conservative predictions work better for this task</li>
</ul>

<h4 id="preprocessing-pipeline">Preprocessing Pipeline</h4>
<p>Our sklearn Pipeline included:</p>
<ol>
  <li>TF-IDF vectorization for ingredients (like baseline)</li>
  <li>StandardScaler for engineered features</li>
  <li>Combined feature matrix for Ridge Regression</li>
</ol>

<h3 id="performance-improvement">Performance Improvement</h3>

<h4 id="baseline-model-performance-1">Baseline Model Performance</h4>
<ul>
  <li>RMSE: 0.6413</li>
  <li>MAE: 0.4547</li>
  <li>R² Score: 0.0129</li>
</ul>

<h4 id="final-model-performance">Final Model Performance</h4>
<ul>
  <li>RMSE: 0.6408 (0.08% improvement)</li>
  <li>MAE: 0.4548 (similar)</li>
  <li>R² Score: 0.0147 (14% improvement)</li>
</ul>

<p>While the improvements are modest, they suggest our engineered features capture meaningful aspects of recipe quality. The similar MAE but improved R² indicates our model makes more consistent predictions across different types of recipes.</p>

<h2 id="conclusion">Conclusion</h2>
<p>The relatively low R² scores for both models suggest that recipe ratings are inherently difficult to predict from recipe characteristics alone, likely due to the subjective nature of cooking and taste preferences. Future improvements could focus on:</p>

<ol>
  <li><strong>Feature Engineering</strong>:
    <ul>
      <li>Create ingredient category features</li>
      <li>Consider ingredient proportions</li>
      <li>Add features for instruction clarity</li>
    </ul>
  </li>
  <li><strong>Data Enhancement</strong>:
    <ul>
      <li>Include user experience level</li>
      <li>Consider seasonal factors</li>
      <li>Add recipe difficulty ratings</li>
    </ul>
  </li>
  <li><strong>Model Extensions</strong>:
    <ul>
      <li>Try ensemble methods</li>
      <li>Experiment with ingredient embeddings</li>
      <li>Consider user-recipe interactions</li>
    </ul>
  </li>
</ol>


      </section>
      <footer>
        
          <p>Project maintained by <a href="https://github.com/vinokour">vinokour</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/mattgraham">mattgraham</a></small></p>
      </footer>
    </div>
  </body>
</html>
